var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{d as r,C as c,r as i,a as d,c as u,b as p,t as m,e as g,w as v,v as h,o as b,f,g as y,h as x,i as w,j as k,k as C,u as M,l as j,s as D,m as U,n as S,p as P,q as L,F as O,x as G,y as A,z as I,A as R,B}from"./vendor.126ac3e7.js";var $=r({name:"Demon",components:{CopyIcon:c},props:{demon:{type:Object,required:!0},active:Boolean,percent:Number,currentPercent:Number,animate:{type:Boolean,default:!0}},emits:["done","give-up"],setup(e,t){const n=i("");return{iptPercent:n,done:function(){t.emit("done",parseInt(n.value))},giveUp:function(){n.value="",t.emit("give-up")},clipboardCopy:function(){e.demon.levelID&&navigator.clipboard.writeText(e.demon.levelID.toString())}}}});const _={class:"flex mt-2 md:mt-0 justify-between md:justify-start"},z={class:"flex flex-col md:ml-5"},E={class:"text-xl md:text-3xl font-medium text-gray-900 dark:text-gray-200 hover:underline"},N={class:"text-lg italic text-gray-700 dark:text-gray-200"},V={key:0},F={key:1,class:"ml-3 mt-0.5 text-gray-500 dark:text-gray-400 text-2xl"},q={key:0,class:"flex md:flex-grow justify-center md:justify-end mt-4 md:mt-0"},T={class:"flex flex-col w-full md:w-auto"},H={class:"flex justify-between mt-5"};$.render=function(e,t,n,a,l,o){const s=d("copy-icon");return b(),u("article",{class:["flex flex-col md:flex-row p-5 shadow-lg w-full",{"fade-in-up":e.animate}]},[p("a",{href:`https://youtu.be/${e.demon.video}`,target:"_blank",rel:"noopener noreferrer"},[p("img",{class:"w-full md:w-48 md:h-28",loading:"lazy",src:`https://i.ytimg.com/vi/${e.demon.video}/mqdefault.jpg`,alt:"thumbnail"},null,8,["src"])],8,["href"]),p("div",_,[p("div",z,[p("a",{href:`https://pointercrate.com/demonlist/${e.demon.position}`,target:"_blank",rel:"noopener noreferrer"},[p("header",E," #"+m(e.demon.position)+" - "+m(e.demon.name),1)],8,["href"]),p("section",N," by "+m(e.demon.creator),1)]),e.active&&e.demon.levelID?(b(),u("div",V,[p("div",{class:"text-gray-400 hover:text-gray-600 active:text-gray-900 hover:cursor-pointer mt-3 ml-2",onClick:t[1]||(t[1]=(...t)=>e.clipboardCopy&&e.clipboardCopy(...t))},[p(s,{size:"1.1x"})])])):g("",!0),e.percent?(b(),u("span",F,m(e.percent)+"%",1)):g("",!0)]),e.active?(b(),u("div",q,[p("div",T,[v(p("input",{type:"number",class:"border rounded border-gray-200 dark:border-gray-600 dark:text-gray-100 shadow-inner p-2 dark:bg-plain-gray-light",placeholder:`At least ${e.currentPercent}%`,"onUpdate:modelValue":t[2]||(t[2]=t=>e.iptPercent=t)},null,8,["placeholder"]),[[h,e.iptPercent]]),p("div",H,[p("button",{onClick:t[3]||(t[3]=t=>e.done()),class:"px-4 py-2 shadow bg-green-500 hover:bg-green-600 text-white rounded"}," Done "),p("button",{onClick:t[4]||(t[4]=t=>e.giveUp()),class:"px-4 py-2 shadow bg-red-500 hover:bg-red-600 text-white rounded"}," Give up ")])])])):g("",!0)],2)};var Y=r({name:"Modal",props:{show:Boolean,cancelable:Boolean},emits:["close"],setup:(e,t)=>({close:function(){e.cancelable&&t.emit("close")}})});const J={key:0,class:"flex flex-col justify-center items-center left-0 top-0 right-0 bottom-0 fixed"},K={class:"relative z-20"};Y.render=function(e,t,n,a,l,o){return e.show?(b(),u("div",J,[p("div",{onClick:t[1]||(t[1]=(...t)=>e.close&&e.close(...t)),class:"absolute left-0 top-0 right-0 bottom-0 bg-black opacity-50 z-10"}),p("div",K,[p("article",null,[f(e.$slots,"default")])])])):g("",!0)};var Q=r({name:"SaveModal",components:{Modal:Y},props:{show:Boolean},emits:["close","save"],setup(e,t){const n=i(null);return{close:function(e=!1){t.emit("close",e?n.value:null),n.value=null},onFileChange:function(e){const t=e.target;t&&(n.value=t.files[0])},file:n,save:function(){t.emit("save")}}}});const W={class:"md:w-96"},X=p("header",{class:"bg-gray-50 dark:bg-plain-gray-light dark:text-gray-200 p-4 rounded-t-lg"},[p("h2",{class:"text-2xl"},"Save / Load")],-1),Z={class:"bg-white dark:bg-plain-gray py-5 px-4"},ee={class:"flex justify-between md:justify-start bg-gray-100 dark:bg-plain-gray-light p-4 rounded-b-lg"};Q.render=function(e,t,n,a,l,o){const s=d("modal");return b(),u(s,{show:e.show,cancelable:!0,onClose:t[4]||(t[4]=t=>e.close(!1))},{default:y((()=>[p("div",W,[X,p("section",Z,[p("input",{type:"file",class:"text-gray-800 dark:text-gray-200",onChange:t[1]||(t[1]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,32)]),p("footer",ee,[p("button",{onClick:t[2]||(t[2]=(...t)=>e.save&&e.save(...t)),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded"}," Save "),p("button",{onClick:t[3]||(t[3]=t=>e.close(!0)),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded ml-2 disabled:opacity-50",disabled:!e.file}," Load ",8,["disabled"])])])])),_:1},8,["show"])};var te=r({name:"GiveUpModal",components:{Modal:Y},props:{show:Boolean},emits:["close","give-up"],setup:(e,t)=>({close:function(){t.emit("close")},giveUp:function(){t.emit("give-up")}})});const ne={class:"md:w-96"},ae=p("header",{class:"bg-white dark:bg-plain-gray dark:text-gray-200 p-4 rounded-t"},[p("h2",{class:"text-2xl"},"Are you sure?")],-1),le={class:"flex justify-between md:justify-start bg-gray-100 dark:bg-plain-gray-light p-4 rounded-b"};function oe(e){e.splice(0,e.length)}function se(e){var t;const n=null==(t=e.video)?void 0:t.match(/https:\/\/www\.youtube\.com\/watch\?v=(.{11})/);return{name:e.name,creator:e.publisher.name,position:e.position,levelID:e.level_id,video:n?n[1]:null}}function re(e){const r=(c=((e,t)=>{for(var n in t||(t={}))l.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},e),t(c,n({version:1})));var c;const i=w(r);return x(i)}function ce(e){return e.every((e=>{return(t=e)>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||43===t||47===t||61===t;var t}))?function(e){const t=k(M(j(D(e))));return{current:t.demon,percent:t.percent,percents:t.percents,playing:t.playing,selectedLists:{main:t.main,extended:t.extended,legacy:t.legacy},demons:t.demons.map((e=>({position:e[0],name:e[1],creator:e[2],video:e[3]})))}}(e):k(C(e))}te.render=function(e,t,n,a,l,o){const s=d("modal");return b(),u(s,{show:e.show,cancelable:!1,onClose:e.close},{default:y((()=>[p("div",ne,[ae,p("footer",le,[p("button",{onClick:t[1]||(t[1]=(...t)=>e.giveUp&&e.giveUp(...t)),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded"}," Yes "),p("button",{onClick:t[2]||(t[2]=(...t)=>e.close&&e.close(...t)),class:"px-4 py-2 bg-white hover:bg-gray-300 shadow rounded ml-2"}," No ")])])])),_:1},8,["show","onClose"])};var ie=r({components:{Demon:$,Modal:Y,SaveModal:Q,GiveUpModal:te},setup(){const e=U({main:!0,extended:!0,legacy:!1});let t=U([]);async function n(e=0,t=100){const n=await fetch(`https://pointercrate.com/api/v2/demons/listed/?limit=${t}&after=${e}`);return n.ok?(await n.json()).map(se):[]}const a=i(!1),l=i(!1),o=function(e){const t=t=>{if(e.value)return t.preventDefault(),t.returnValue="",!0};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}(a);S((()=>{o()}));const s=P((()=>t.slice(0,r.value+1))),r=i(0),c=i(1),d=U([]);const u=P((()=>!a.value&&t.length)),p=i(!1),m=P((()=>t.slice(r.value+1).filter(((e,t)=>c.value+t+1<=100)))),g=i(!1);const v=i(!1);const h=i(!1),b=i("dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches);return L((()=>{localStorage.setItem("theme",b.value?"dark":"light")})),{demons:t,currentDemons:s,currentDemon:r,currentPercent:c,percents:d,demonDone:function(e){isNaN(e)||e<c.value||(e>=100?(e=100,a.value=!1):r.value++,c.value=e+1,d.push(e))},giveUp:function(){g.value=!1,a.value=!1},selectedLists:e,start:async function(){l.value||Object.values(e).some((e=>e))&&(a.value=!0,l.value=!0,p.value=!1,oe(t),r.value=-1,e.main&&t.push(...await n(0,75)),e.extended&&t.push(...await n(75,75)),e.legacy&&(t.push(...await n(150)),t.push(...(await n(250)).filter((e=>e.levelID)))),l.value=!1,function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(t),r.value=0,c.value=1,oe(d))},playing:a,fetching:l,showResults:u,showRemaining:p,remainingDemons:m,showGiveUpModal:g,save:function(){const n=re({playing:a.value,selectedLists:e,demons:t,current:r.value,percent:c.value,percents:d}),l=new Blob([n],{type:"application/msgpack"});O.saveAs(l,"roulette-save.mp")},onSaveModalClose:function(n){n&&function(n){n.arrayBuffer().then((n=>{const l=ce(new Uint8Array(n));a.value=l.playing,Object.assign(e,l.selectedLists),oe(t),t.push(...l.demons),r.value=l.current,c.value=l.percent,oe(d),d.push(...l.percents),p.value=!1}))}(n),v.value=!1},showSaveModal:v,showAboutModal:h,darkMode:b}}});const de=p("div",{class:"w-screen h-screen fixed -z-10 dark:bg-plain-gray"},null,-1),ue={class:"flex justify-center"},pe={class:"flex flex-col"},me={class:"flex mt-5 mx-3 justify-between items-center"},ge={class:"flex flex-col text-gray-800 dark:text-gray-300"},ve=R(" Main list "),he=R(" Extended list "),be=R(" Legacy list "),fe={class:"flex"},ye={class:"flex flex-col items-center w-screen max-w-7xl gap-5 mt-10"},xe={key:0,class:"flex flex-col items-center mt-5 p-5 shadow-lg w-full"},we=p("h2",{class:"text-3xl font-medium text-gray-800 dark:text-gray-200"},"Results",-1),ke={class:"text-xl mt-4 text-center dark:text-gray-200"},Ce={key:1,class:"flex flex-col mt-5 gap-5"},Me=p("div",{class:"mb-64"},null,-1),je={class:"max-w-xl bg-white dark:bg-plain-gray dark:text-gray-200 rounded-lg p-5"},De=p("header",null,[p("h2",{class:"text-2xl"},"About")],-1),Ue=p("section",null,[p("p",null," The Extreme Demon Roulette is a challenge where you must go through as many demons as possible, with the challenge ending when you get 100% or give up. "),p("p",null,[R(" Idea by "),p("a",{href:"https://youtu.be/nv_9FkfGRsc",class:"text-blue-500 hover:underline"},"npesta"),R(", website by "),p("a",{href:"https://github.com/matcool/",class:"text-blue-500 hover:underline"},"me :)")])],-1),Se={class:"pt-4"},Pe=R(" Dark mode ");ie.render=function(e,t,n,a,l,o){const s=d("demon"),r=d("give-up-modal"),c=d("save-modal"),i=d("modal");return b(),u("main",{class:{dark:e.darkMode}},[de,p("div",ue,[p("div",pe,[p("h1",{class:"md:absolute md:left-1/2 md:top-3 md:transform-gpu md:-translate-x-1/2 mt-5 text-3xl font-medium text-center text-gray-800 dark:text-gray-200 cursor-help md:border-b-2 border-dashed hover:border-gray-600 dark:border-gray-600 dark:hover:border-gray-300",onClick:t[1]||(t[1]=t=>e.showAboutModal=!0)}," Extreme Demon Roulette "),p("div",me,[p("div",ge,[p("label",null,[v(p("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedLists.main=t)},null,512),[[G,e.selectedLists.main]]),ve]),p("label",null,[v(p("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedLists.extended=t)},null,512),[[G,e.selectedLists.extended]]),he]),p("label",null,[v(p("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedLists.legacy=t)},null,512),[[G,e.selectedLists.legacy]]),be])]),p("div",fe,[p("button",{onClick:t[5]||(t[5]=t=>e.showSaveModal=!0),class:"text-white rounded px-4 py-2 bg-blue-500 hover:bg-blue-600 mr-2"}," Save "),p("button",{onClick:t[6]||(t[6]=t=>e.start()),class:["text-white rounded px-4 py-2",{"bg-green-500 hover:bg-green-600":!e.playing,"bg-red-500 hover:bg-red-600":e.playing,"opacity-60 cursor-not-allowed":e.fetching}],disabled:e.fetching},m(e.playing?"Restart":"Start"),11,["disabled"])])]),p("div",ye,[(b(!0),u(A,null,I(e.currentDemons,((n,a)=>(b(),u(s,{key:a,demon:n,active:e.playing&&a===e.currentDemon,currentPercent:e.currentPercent,percent:e.percents[a],onDone:e.demonDone,onGiveUp:t[7]||(t[7]=t=>e.showGiveUpModal=!0)},null,8,["demon","active","currentPercent","percent","onDone"])))),128))]),e.showResults?(b(),u("article",xe,[we,p("section",ke,[p("p",null,"Number of demons: "+m(e.percents.length),1),p("p",null,"Highest percent: "+m(e.currentPercent-1)+"%",1)]),e.currentPercent<100?(b(),u("button",{key:0,onClick:t[8]||(t[8]=t=>e.showRemaining=!0),class:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded"}," Show remaining demons ")):g("",!0)])):g("",!0),e.showRemaining?(b(),u("div",Ce,[(b(!0),u(A,null,I(e.remainingDemons,((t,n)=>(b(),u(s,{key:n,demon:t,active:!1,currentPercent:0,percent:e.currentPercent+n+1,animate:!1},null,8,["demon","percent"])))),128))])):g("",!0),Me])]),p(r,{show:e.showGiveUpModal,onClose:t[9]||(t[9]=t=>e.showGiveUpModal=!1),onGiveUp:e.giveUp},null,8,["show","onGiveUp"]),p(c,{show:e.showSaveModal,onClose:e.onSaveModalClose,onSave:e.save},null,8,["show","onClose","onSave"]),p(i,{cancelable:!0,show:e.showAboutModal,onClose:t[11]||(t[11]=t=>e.showAboutModal=!1)},{default:y((()=>[p("div",je,[De,Ue,p("section",Se,[p("label",null,[v(p("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=t=>e.darkMode=t)},null,512),[[G,e.darkMode]]),Pe])])])])),_:1},8,["show"])],2)};B(ie).mount("#app");
